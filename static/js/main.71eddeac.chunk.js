(this["webpackJsonpusers-book"]=this["webpackJsonpusers-book"]||[]).push([[0],{22:function(e,t,n){e.exports=n(34)},27:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),u=n.n(c),l=(n(27),n(7)),o=n(1),i=function(){var e=Object(o.g)(),t=e.edit;return e.edit?r.a.createElement("div",{className:"page__content"},r.a.createElement("div",null," Edit fields"),r.a.createElement("div",null,t.name),r.a.createElement("button",{type:"button"},r.a.createElement(l.b,{to:"/"},"Back contact list"))):r.a.createElement(o.a,{to:"/"})};var s=function(){return r.a.createElement("div",{className:"page__content"},r.a.createElement("span",{role:"img"},"\ud83d\ude22"),r.a.createElement(l.b,{to:"/"},"Back home"))},m=n(6),f=n(20),d=n.n(f),p=n(12),E=n.n(p),b=function(e){var t=e.id,n=e.name,c=e.onDelete,u=e.onUpgrade,o=e.onUpgradePhone,i=e.updated,s=e.createdDate,f=e.phone,p=Object(a.useState)(n),b=Object(m.a)(p,2),h=b[0],v=b[1],g=Object(a.useState)(f),N=Object(m.a)(g,2),O=N[0],j=N[1],y=Object(a.useState)(!1),_=Object(m.a)(y,2),k=_[0],w=_[1],D=i;Object(a.useEffect)((function(){E()(i).format("D-MM-YYYY, H:mm")}),[i]),i&&(D=E()(i).format("D-MM-YYYY, H:mm"));var S=d()("showInfo",{"showInfo-visible":k}),C=E()(s).format("D-MM-YYYY, H:mm");return r.a.createElement("li",{className:"list-item"},r.a.createElement("div",{className:"list-item__main"},r.a.createElement("span",{className:"list-item__text"},"Name:",r.a.createElement("input",{type:"text",value:h,onChange:function(e){v(e.target.value)},onKeyUp:function(){return u(t,h)}})),r.a.createElement("span",{className:"list-item__text"},"Phone:",r.a.createElement("input",{type:"number",value:O,onChange:function(e){j(e.target.value)},onKeyUp:function(){return o(t,O)}})),r.a.createElement("button",{type:"button",onClick:function(){w(!k)},className:"btn btn__info"},"Show Info"),r.a.createElement("button",{onClick:function(){return c(t)},type:"button",className:"btn btn__delete"},"Delete")),r.a.createElement("div",{className:S},r.a.createElement("ul",null,r.a.createElement("li",null,"FirstName:",n),r.a.createElement("li",null,"PhoneNumber:",f),r.a.createElement("li",null,"created:",C),i?r.a.createElement("li",null,"updated:",D):null),r.a.createElement("button",{type:"button",className:""},r.a.createElement(l.b,{to:{pathname:"/edit",edit:e}},"Edit fields"))))},h=n(21),v=function(e){var t=e.onCreate,n=Object(a.useState)(""),c=Object(m.a)(n,2),u=c[0],l=c[1],o=Object(a.useState)(""),i=Object(m.a)(o,2),s=i[0],f=i[1];return r.a.createElement("div",{className:"create-user"},r.a.createElement("span",null,"Name:"),r.a.createElement("input",{className:"create-user__input",type:"text",value:u,onChange:function(e){l(e.target.value)}}),r.a.createElement("span",null,"Phone:"),r.a.createElement("input",{className:"create-user__input",type:"number",value:s,onChange:function(e){f(e.target.value)}}),r.a.createElement("button",{className:"btn create-user__btn",onClick:function(){if(""!==u){var e={name:u,phone:s,createdDate:new Date}||{},n=JSON.parse(localStorage.getItem("usersList"))||[],a=[e].concat(Object(h.a)(n));localStorage.setItem("usersList",JSON.stringify(a)),t(u,s),l(""),f("")}},type:"button"},"Create"))},g="https://5e983e545eabe7001681bd52.mockapi.io/userbook",N=function(e,t){return fetch("".concat(g,"/").concat(e),{method:"PUT",headers:{"Content-type":"application/json;charset=utf-8"},body:JSON.stringify(t)}).then((function(e){if(!e.ok)throw new Error("Faild to update user")}))},O=function(){var e=Object(a.useState)({users:[]}),t=Object(m.a)(e,2),n=t[0],c=t[1],u=function(){fetch(g).then((function(e){if(e.ok)return e.json()})).then((function(e){return e})).then((function(e){return c({users:e})}))};Object(a.useEffect)((function(){u()}),[]);var l=function(e){(function(e){return fetch("".concat(g,"/").concat(e),{method:"DELETE"}).then((function(e){if(!e.ok)throw new Error("Failed to delete user")}))})(e).then((function(){return u()}))},o=function(e,t){var a=n.users.find((function(t){return t.id===e})).name,r={name:t,updated:new Date};a!==t&&N(e,r).then((function(){return u()}))},i=function(e,t){var a=n.users.find((function(t){return t.id===e})).phone,r={phone:t,updated:new Date};a!==t&&N(e,r).then((function(){return u()}))};return r.a.createElement("div",{className:"user-list"},r.a.createElement(v,{onCreate:function(e,t){var n,a={name:e,phone:t,createdDate:new Date,updated:""};(n=a,fetch(g,{method:"POST",headers:{"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(n)}).then((function(e){if(!e.ok)throw new Error("Faild to create user")}))).then((function(){return u()}))}}),r.a.createElement("ul",{className:"list"},n.users.map((function(e){return r.a.createElement(b,Object.assign({key:e.id},e,{onDelete:l,onUpgrade:o,onUpgradePhone:i}))}))))},j=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title"},"Users List"),r.a.createElement(O,null))},y=function(){return r.a.createElement(l.a,null,r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/"},r.a.createElement(j,null)),r.a.createElement(o.b,{path:"/edit"},r.a.createElement(i,null)),r.a.createElement(o.b,{path:"*"},r.a.createElement(s,null))))};u.a.render(r.a.createElement(y,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.71eddeac.chunk.js.map